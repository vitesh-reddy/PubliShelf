<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Publish Book - PubliShelf</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="../../public/css/styles.css">
    <link rel="stylesheet" href="/css/styles.css">
</head>

<body class="bg-gray-50">
    <!-- Navbar -->
    <nav class="fixed w-full bg-white shadow-sm z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="/publisher/dashboard" class="flex items-center">
                        <i class="fas fa-arrow-left text-gray-600 mr-4"></i>
                        <span
                            class="text-2xl font-bold bg-gradient-to-r from-purple-600 to-indigo-600 text-transparent bg-clip-text">PubliShelf</span>
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="pt-16">
        <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="bg-white rounded-xl shadow-md overflow-hidden">
                <div class="p-6 border-b">
                    <h1 class="text-2xl font-bold text-gray-900">Publish New Book</h1>
                    <p class="text-gray-500 mt-1">Fill in the details to list your book for sale</p>
                </div>


                <!-- zzzz -->
                <form method="POST" action="/publisher/publish-book" enctype="multipart/form-data"
                    class="p-6 space-y-6 animate-fade-in">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="bookTitle" class="block text-sm font-medium text-gray-700">Book Title</label>
                            <input type="text" name="title" id="bookTitle" required
                                class="mt-1 px-2 py-1 block w-full rounded-lg border-gray-300 shadow-sm hover:shadow-md focus:outline-none focus:outline-purple-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700" for="author">Author</label>
                            <input type="text" name="author" id="author" required
                                class="mt-1 px-2 py-1 block w-full rounded-lg border-gray-300 shadow-sm   hover:shadow-md focus:outline-none focus:outline-purple-500">
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700" for="description">Description</label>
                        <textarea rows="4" name="description" id="description" required
                            class="mt-1 px-2 py-1 block w-full rounded-lg border-gray-300 shadow-sm  hover:shadow-md focus:outline-none focus:outline-purple-500"></textarea>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700" for="genre">Genre</label>
                            <select required name="genre" id="genre"
                                class="bg-white mt-1 px-2 py-1 block w-full rounded-lg border-gray-300 shadow-sm hover:shadow-md focus:outline-none focus:outline-purple-500">
                                <option class="bg-white block px-4 py-2 text-gray-700 hover:bg-purple-50" disabled
                                    selected value="">Select Genre</option>
                                <option class="bg-white block px-4 py-2 text-gray-700 hover:bg-purple-50"
                                    value="Fiction">Fiction</option>
                                <option class="bg-white block px-4 py-2 text-gray-700 hover:bg-purple-50"
                                    value="Non-Fiction">Non-Fiction</option>
                                <option class="bg-white block px-4 py-2 text-gray-700 hover:bg-purple-50"
                                    value="Mystery">Mystery</option>
                                <option class="bg-white block px-4 py-2 text-gray-700 hover:bg-purple-50"
                                    value="Science Fiction">Science Fiction</option>
                                <option class="bg-white block px-4 py-2 text-gray-700 hover:bg-purple-50"
                                    value="Romance">Romance</option>
                                <option class="bg-white block px-4 py-2 text-gray-700 hover:bg-purple-50"
                                    value="Thriller">Thriller</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700" for="price">Price (â‚¹)</label>
                            <input type="number" name="price" id="price" step="1" min="0" required
                                class="mt-1 px-2 py-1 block w-full rounded-lg border-gray-300 shadow-sm   hover:shadow-md focus:outline-none focus:outline-purple-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700" for="quantity">Quantity</label>
                            <input type="number" name="quantity" id="quantity" required
                                class="mt-1 px-2 py-1 block w-full rounded-lg border-gray-300 shadow-sm  hover:shadow-md focus:outline-none focus:outline-purple-500">
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700">Book Cover Image</label>
                        <div
                            class="mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg">
                            <div class="space-y-1 text-center">
                                <i class="fas fa-cloud-upload-alt text-gray-400 text-3xl"></i>
                                <div class="flex text-sm text-gray-600">
                                    <label for="imageFile"
                                        class="relative cursor-pointer bg-white rounded-md font-medium text-purple-600 hover:text-purple-500">
                                        <span>Upload a file</span>
                                        <input name="imageFile" id="imageFile" type="file" class="sr-only"
                                            accept="image/*">
                                    </label>
                                    <p class="pl-1">or drag and drop</p>
                                </div>
                                <p class="text-xs text-gray-500">PNG, JPG, GIF up to 10MB</p>
                            </div>
                        </div>
                        <!-- Image Preview Section -->
                        <div id="imagePreviewContainer" class="mt-4 hidden">
                            <h4 class="text-sm font-medium text-gray-700 mb-2">Image Preview:</h4>
                            <img id="imagePreview" class="w-48 h-64 object-cover rounded-lg shadow-md"
                                alt="Uploaded Image Preview">
                        </div>
                    </div>
                    <div class="flex justify-end space-x-4">
                        <button type="button" onclick="window.location.href='/publisher/dashboard'"
                            class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">
                            Cancel
                        </button>
                        <button type="submit" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">
                            Publish Book
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        const form = document.querySelector('form');
        const imageElement = document.getElementById('imageFile');

        form.addEventListener('submit', async (event) => {
            if (!imageElement.files[0]) {
                event.preventDefault();
                alert("Please upload a book cover image.");
            }
        });
        const imageFileInput = document.getElementById('imageFile');
        const imagePreviewContainer = document.getElementById('imagePreviewContainer');
        const imagePreview = document.getElementById('imagePreview');

        imageFileInput.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    imagePreview.src = e.target.result; // Set the preview image source
                    imagePreviewContainer.classList.remove('hidden'); // Show the preview container
                };
                reader.readAsDataURL(file); // Read the file as a data URL
            } else {
                imagePreviewContainer.classList.add('hidden'); // Hide the preview container if no file is selected
            }
        });
    </script>
</body>

</html>